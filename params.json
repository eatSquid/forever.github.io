{
  "name": "Spring+Mybatis实现分页   附代码",
  "tagline": "博客",
  "body": "# 直接mapper文件键入sql分页语句\r\n使用mysql中limit语句\r\ndao层代码：\r\npackage com.cubefs.em.business.dao.base;\r\nimport java.util.List;\r\n\r\nimport com.cubefs.em.business.entity.emsloanqry.Emsloan;\r\nimport com.cubefs.em.business.entity.emsloanqry.PageBean;\r\n\r\npublic interface EmsloanQryDao {\r\n\r\n\tEmsloan selectByPrimaryKey(String FORMNO);\r\n\tList<Emsloan> selectAll();\r\n\tList<Emsloan> paging(PageBean page);\r\n}\r\n\r\npackage com.cubefs.em.business.dao;\r\nimport java.util.List;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport com.cubefs.em.business.dao.base.EmsloanQryDao;\r\nimport com.cubefs.em.business.entity.emsloanqry.Emsloan;\r\nimport com.cubefs.em.business.entity.emsloanqry.PageBean;\r\nimport com.cubefs.em.business.service.impl.EmsloanQryServiceImpl;\r\n\r\n@Repository\r\npublic class EmsloanDao{\r\n\t\r\n\t@Autowired\r\n\tprivate EmsloanQryDao dao;\r\n\t\r\n\tpublic Emsloan em_sloanqry(String FORMNO){ \r\n\t\t/*Emsloan output = new Emsloan();//这是什么方法？？？？？、\r\n\t\toutput = dao.emsloanqry(FORMNO);*/\r\n\t\treturn dao.selectByPrimaryKey(FORMNO);\r\n\t}\r\n\t\r\n\tpublic List<Emsloan> selectAll(){\r\n\t\treturn dao.selectAll();\r\n\t}\r\n\t\r\n\tpublic List<Emsloan> paging(PageBean page){\r\n\t\treturn dao.paging(page);\r\n\t}\r\n\t\r\n}\r\n\r\nmapper xml映射文件 键入sql语句\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\r\n<!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\" >\r\n<mapper namespace=\"com.cubefs.em.business.dao.base.EmsloanQryDao\">\r\n\t<resultMap id=\"BaseResultMap\"\r\n\t\ttype=\"com.cubefs.em.business.entity.emsloanqry.Emsloan\">\r\n\t\t<id column=\"FORMNO\" property=\"formno\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"FILLINGDATE\" property=\"fillingdate\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"REQUSRNO\" property=\"requsrno\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"REQUSRNM\" property=\"requsrnm\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"APPLYUSRNO\" property=\"applyusrno\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"APPLYUSRNM\" property=\"applyusrnm\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"APPLYKOSTLNO\" property=\"applykostlno\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"APPLYKOSTLNM\" property=\"applykostlnm\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"APPLYDEPTNO\" property=\"applydeptno\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"APPLYDEPTNM\" property=\"applydeptnm\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"SUMMARY\" property=\"summary\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"COMMENTS\" property=\"comments\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"PURPOSE\" property=\"purpose\" jdbcType=\"VARCHAR\" />\r\n\t\t<result column=\"AGRREPYDATE\" property=\"agrrepydate\" jdbcType=\"VARCHAR\" />\r\n\t</resultMap>\r\n\t<sql id=\"Base_Column_List\">\r\n\t\tformno,fillingdate,requsrno,requsrnm,applyusrno,applyusrnm,applykostlno,applykostlnm,applydeptno,applydeptnm,summary,comments,purpose,agrrepydate\r\n\t</sql>\r\n\t<select id=\"selectByPrimaryKey\" resultMap=\"BaseResultMap\"\r\n\t\tparameterType=\"java.lang.String\">\r\n\t\tselect\r\n\t\t<include refid=\"Base_Column_List\" />\r\n\t\tfrom cbt_em_resquestloan\r\n\t\twhere formno = #{FORMNO,jdbcType=VARCHAR}\r\n\t</select>\r\n\t<select id=\"selectAll\" resultMap=\"BaseResultMap\" parameterType=\"java.lang.String\">\r\n\t\tselect\r\n\t\t<include refid=\"Base_Column_List\" />\r\n\t\tfrom cbt_em_resquestloan\r\n\t</select>\r\n\t\r\n\t<!-- 分页 -->\r\n\t<select id=\"paging\" resultMap=\"BaseResultMap\"\r\n\t\tparameterType=\"com.cubefs.em.business.entity.emsloanqry.PageBean\">\r\n\t\tselect * from cbt_em_resquestloan\r\n\t\twhere 1=1\r\n\t\tlimit ${curCount},${rowsPerPage}\r\n\t</select>\r\n</mapper>\r\n\r\n\r\n对象封装类：\r\npackage com.cubefs.em.business.entity.emsloanqry;\r\n\r\nimport java.io.Serializable;\r\n\r\npublic class Emsloan implements Serializable{\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tprivate static final long serialVersionUID = 1L;\r\n\tprivate String formno;\r\n\tprivate String fillingdate;\r\n\tprivate String requsrno;\r\n\tprivate String requsrnm;\r\n\tprivate String applyusrno;\r\n\tprivate String applyusrnm;\r\n\tprivate String applykostlno;\r\n\tprivate String applykostlnm;\r\n\tprivate String applydeptno;\r\n\tprivate String applydeptnm;\r\n\tprivate String summary;\r\n\tprivate String comments;\r\n\tprivate String purpose;\r\n\tprivate String agrrepydate;\r\n\tprivate PageBean page;\r\n\t\r\n\t\r\n\tpublic PageBean getPage() {\r\n\t\treturn page;\r\n\t}\r\n\tpublic void setPage(PageBean page) {\r\n\t\tthis.page = page;\r\n\t}\r\n\tpublic String getFormno() {\r\n\t\treturn formno;\r\n\t}\r\n\tpublic void setFormno(String formno) {\r\n\t\tthis.formno = formno;\r\n\t}\r\n\tpublic String getFillingdate() {\r\n\t\treturn fillingdate;\r\n\t}\r\n\tpublic void setFillingdate(String fillingdate) {\r\n\t\tthis.fillingdate = fillingdate;\r\n\t}\r\n\tpublic String getRequsrno() {\r\n\t\treturn requsrno;\r\n\t}\r\n\tpublic void setRequsrno(String requsrno) {\r\n\t\tthis.requsrno = requsrno;\r\n\t}\r\n\tpublic String getRequsrnm() {\r\n\t\treturn requsrnm;\r\n\t}\r\n\tpublic void setRequsrnm(String requsrnm) {\r\n\t\tthis.requsrnm = requsrnm;\r\n\t}\r\n\tpublic String getApplyusrno() {\r\n\t\treturn applyusrno;\r\n\t}\r\n\tpublic void setApplyusrno(String applyusrno) {\r\n\t\tthis.applyusrno = applyusrno;\r\n\t}\r\n\tpublic String getApplyusrnm() {\r\n\t\treturn applyusrnm;\r\n\t}\r\n\tpublic void setApplyusrnm(String applyusrnm) {\r\n\t\tthis.applyusrnm = applyusrnm;\r\n\t}\r\n\tpublic String getApplykostlno() {\r\n\t\treturn applykostlno;\r\n\t}\r\n\tpublic void setApplykostlno(String applykostlno) {\r\n\t\tthis.applykostlno = applykostlno;\r\n\t}\r\n\tpublic String getApplykostlnm() {\r\n\t\treturn applykostlnm;\r\n\t}\r\n\tpublic void setApplykostlnm(String applykostlnm) {\r\n\t\tthis.applykostlnm = applykostlnm;\r\n\t}\r\n\tpublic String getApplydeptno() {\r\n\t\treturn applydeptno;\r\n\t}\r\n\tpublic void setApplydeptno(String applydeptno) {\r\n\t\tthis.applydeptno = applydeptno;\r\n\t}\r\n\tpublic String getApplydeptnm() {\r\n\t\treturn applydeptnm;\r\n\t}\r\n\tpublic void setApplydeptnm(String applydeptnm) {\r\n\t\tthis.applydeptnm = applydeptnm;\r\n\t}\r\n\tpublic String getSummary() {\r\n\t\treturn summary;\r\n\t}\r\n\tpublic void setSummary(String summary) {\r\n\t\tthis.summary = summary;\r\n\t}\r\n\tpublic String getComments() {\r\n\t\treturn comments;\r\n\t}\r\n\tpublic void setComments(String comments) {\r\n\t\tthis.comments = comments;\r\n\t}\r\n\tpublic String getPurpose() {\r\n\t\treturn purpose;\r\n\t}\r\n\tpublic void setPurpose(String purpose) {\r\n\t\tthis.purpose = purpose;\r\n\t}\r\n\tpublic String getAgrrepydate() {\r\n\t\treturn agrrepydate;\r\n\t}\r\n\tpublic void setAgrrepydate(String agrrepydate) {\r\n\t\tthis.agrrepydate = agrrepydate;\r\n\t}\r\n\t\r\n}\r\n\r\n\r\npackage com.cubefs.em.business.entity.emsloanqry;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.List;\r\n\r\npublic class PageBean implements Serializable {\r\n\t/**\r\n\t * \r\n\t */\r\n\tprivate static final long serialVersionUID = 1L;\r\n\tprivate int curPage;\r\n\tprivate int rowsPerPage;\r\n\tprivate int curCount;\r\n\tprivate int pagenow;\r\n\t\r\n\t\r\n\tpublic int getPagenow() {\r\n\t\treturn pagenow;\r\n\t}\r\n\tpublic void setPagenow(int pagenow) {\r\n\t\tthis.pagenow = pagenow;\r\n\t}\r\n\tpublic int getCurCount() {\r\n\t\treturn curCount;\r\n\t}\r\n\tpublic void setCurCount(int curCount) {\r\n\t\tthis.curCount = curCount;\r\n\t}\r\n\tpublic int getCurPage() {\r\n\t\treturn curPage;\r\n\t}\r\n\tpublic void setCurPage(int curPage) {\r\n\t\tthis.curPage = curPage;\r\n\t}\r\n\tpublic int getRowsPerPage() {\r\n\t\treturn rowsPerPage;\r\n\t}\r\n\tpublic void setRowsPerPage(int rowsPerPage) {\r\n\t\tthis.rowsPerPage = rowsPerPage;\r\n\t}\r\n}\r\n\r\n\r\n控制层代码：\r\npackage com.cubefs.em.web.controller;\r\n\r\n\r\nimport java.util.List;\r\n\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpSession;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\nimport com.cubefs.em.business.entity.emsloanqry.Emsloan;\r\nimport com.cubefs.em.business.entity.emsloanqry.PageBean;\r\nimport com.cubefs.em.business.service.impl.EmsloanQryServiceImpl;\r\n\r\n@Controller\r\npublic class EmsloanQryController {\r\n\t/**\r\n\t * 借款信息查询\r\n\t * @param model\r\n\t * @return\r\n\t */\r\n\t//借款查询jsp入口转向\r\n\t@Autowired\r\n\tHttpServletRequest request ;\r\n\r\n\t@Autowired\r\n\tprivate EmsloanQryServiceImpl service;\r\n\r\n\t@Autowired\r\n\tHttpSession session;\r\n\r\n\t@RequestMapping(\"/emsloanqry\")\r\n\tpublic String emsloanqry(){\r\n\t\tEmsloan em = service.em_sloanqry(\"1\");\r\n\t\tSystem.out.println(em.getFillingdate());\r\n\t\treturn \"/emsloanqry/emsloan\";\r\n\t}\r\n\r\n\t@RequestMapping(\"/selectAll\")\r\n\tpublic String selectAll(){\r\n\t\tList<Emsloan> list = service.selectAll();\r\n\t\trequest.setAttribute(\"list\", list);\r\n\r\n\t\treturn \"/emsloanqry/emsloan\";\r\n\t}\r\n\r\n\t@RequestMapping(\"/emsloandetail\")\r\n\tpublic String emsloandetail(){\r\n\r\n\t\treturn \"/emsloanqry/emsloandetail\";\r\n\t}\r\n\r\n\t@RequestMapping(\"/showEmsloan\")\r\n\tpublic String showEmsloan(PageBean page){\r\n\t\tint pagen;\r\n\t\tif(request.getParameter(\"pagenow\")==null){\r\n\t\t\tpagen = 0;\r\n\t\t}else if(Integer.parseInt(request.getParameter(\"pagenow\"))<0){\r\n\t\t\tpagen = 0;\r\n\t\t}else{\r\n\t\t\tpagen = Integer.parseInt(request.getParameter(\"pagenow\"));\r\n\t\t}\r\n\t\tif(pagen==0){\r\n\t\t\tpage.setCurPage(0);\r\n\t\t}else if(pagen<0){\r\n\t\t\tpage.setCurPage(0);\r\n\t\t}else{\r\n\t\t\tpage.setCurPage(pagen);\r\n\t\t}\r\n\t\tpage.setRowsPerPage(3);\r\n\t\tList<Emsloan> list = service.paging(page);\r\n\t\tif(list.size()<3&&list.size()>0){\r\n\t\t\tsession.removeAttribute(\"page_session\");\r\n\t\t\tsession.setAttribute(\"page_session\", list);\r\n\t\t\trequest.setAttribute(\"pagenow\", pagen);\r\n\t\t\trequest.setAttribute(\"page\", list);\r\n\t\t}else if(list.size()==0){\r\n\t\t\trequest.setAttribute(\"pagenow\", 2);\r\n\t\t\trequest.setAttribute(\"page\", session.getAttribute(\"page_session\"));\r\n\t\t}else{\r\n\t\t\trequest.setAttribute(\"page\", list);\r\n\t\t\trequest.setAttribute(\"pagenow\", pagen);\r\n\t\t}\r\n\t\treturn \"/emsloanqry/emsloan\";\r\n\t}\r\n}\r\n\r\n\r\n前台jsp页面：\r\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\r\n\tpageEncoding=\"UTF-8\"\r\n\timport=\"com.cubefs.em.business.entity.emsloanqry.*,java.util.*\"%>\r\n<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n<html>\r\n<head>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\">\r\n<title>借款查询</title>\r\n\r\n</head>\r\n<body>\r\n\t<br />\r\n\t<br />\r\n\t<br />\r\n\t<%\r\n\t\tList<Emsloan> list = (List) request.getAttribute(\"page\");\r\n\t\tint pagenow;\r\n\t\tif(request.getAttribute(\"pagenow\")==null){\r\n\t\t\tpagenow = 0;\r\n\t\t}else{\r\n\t\t\tpagenow = Integer.parseInt((String)(request.getAttribute(\"pagenow\")).toString());\r\n\t\t}\r\n\t%>\r\n\t<table align=\"center\" border=\"0\" cellpadding=\"3\" cellspacing=\"1\" width=\"100%\"  style=\"background-color: #b9d8f3;\" >\r\n\t\t<th>申请部门</th>\r\n\t\t<th>借款人</th>\r\n\t\t<th>申请起始日期</th>\r\n\t\t<th>申请截止日期</th>\r\n\t\t<th>约定还款起始日</th>\r\n\t\t<th>约定还款截至日</th>\r\n\t\t<th></th>\r\n\t\t<th></th>\r\n\t\t<%\r\n\t\t\tfor (int i = 0; i < list.size(); i++) {\r\n\t\t%>\r\n\t\t<tr>\r\n\t\t\t<td align=\"center\"><%=list.get(i).getApplydeptnm()%></td>\r\n\t\t\t<td align=\"center\"><%=list.get(i).getApplyusrnm()%></td>\r\n\t\t\t<td align=\"center\"><%=list.get(i).getFillingdate()%></td>\r\n\t\t\t<td align=\"center\"></td>\r\n\t\t\t<td align=\"center\"></td> \r\n\t\t\t<td align=\"center\"><%=list.get(i).getAgrrepydate()%></td>\r\n\t\t\t<td align=\"center\"><a href=\"\">查询</a></td>\r\n\t\t\t<td align=\"center\"><a href=\"\">导出</a></td>\r\n\t\t</tr>\r\n\t\t<%\r\n\t\t\t}\r\n\t\t%>\r\n\t</table>\r\n\t<h3 align=\"center\">\r\n\t\t<a href=\"<%=request.getContextPath()%>/showEmsloan.jhtml?pagenow=0\" >首页</a>\r\n\t\t<a href=\"<%=request.getContextPath()%>/showEmsloan.jhtml?pagenow=<%= pagenow-1%>\" >←上一页</a>\r\n\t\t<a href=\"<%=request.getContextPath()%>/showEmsloan.jhtml?pagenow=<%= pagenow+1%>\" >下一页→</a>\r\n\t\t<a href=\"<%=request.getContextPath()%>/showEmsloan.jhtml?pagenow=100\" >尾页</a>\r\n\t</h3>\r\n\t<br />\r\n\t<div align=\"center\">\r\n\t\t<input type=\"button\" value=\"详细查询\" onclick=\"mydiv('demo')\" />\r\n\t</div><br/>\r\n\r\n\t<div id=\"demo\">\r\n\t\t<table border=\"0\" cellpadding=\"3\" cellspacing=\"1\" width=\"100%\" align=\"center\" style=\"background-color: #b9d8f3;\">\r\n\t\t\t<th><a href=\"\" style=\"color:red;text-decoration:none;\" >一键催单</a></th>\r\n\t\t\t<th>借款人</th>\r\n\t\t\t<th>借款凭证号</th>\r\n\t\t\t<th>借款单据号</th>\r\n\t\t\t<th>借款时间</th>\r\n\t\t\t<th>约定还款时间</th>\r\n\t\t\t<th>借款用途</th>\r\n\t\t\t<th>还款金额（元）</th>\r\n\t\t\t<th>欠款金额（元）</th>\r\n\t\t\t<th></th>\r\n\t\t\t<%\r\n\t\t\t\tfor(int i = 0; i < list.size(); i++){\r\n\t\t\t%>\r\n\t\t\t<tr>\r\n\t\t\t\t<td align=\"center\">\r\n\t\t\t\t\t<input type=\"checkbox\" name=\"<%=list.get(i).getFormno()%>\">\r\n\t\t\t\t</td>\r\n\t\t\t\t<td align=\"center\"><%=list.get(i).getApplyusrnm()%></td>\r\n\t\t\t\t<td align=\"center\"><%=list.get(i).getApplyusrno()%></td>\r\n\t\t\t\t<td align=\"center\"><%=list.get(i).getApplykostlno()%></td>\r\n\t\t\t\t<td align=\"center\"><%=list.get(i).getFillingdate()%></td>\r\n\t\t\t\t<td align=\"center\"><%=list.get(i).getAgrrepydate()%></td>\r\n\t\t\t\t<td align=\"center\"><%=list.get(i).getPurpose()%></td>\r\n\t\t\t\t<td align=\"center\"></td>\r\n\t\t\t\t<td align=\"center\"></td>\r\n\t\t\t\t<td><a href=\"\">催款</a></td>\r\n\t\t\t</tr>\r\n\t\t\t<%\r\n\t\t\t\t}\r\n\t\t\t%>\r\n\t\t</table>\r\n\t</div>\r\n\r\n\r\n\t<script language=\"text/javascript\" type=\"text/javascript\">\r\n\t\tdocument.getElementById('demo').style.display = \"none\";\r\n\r\n\t\tfunction mydiv(id) {\r\n\t\t\tvar x = document.getElementById(id);\r\n\t\t\tif (x.style.display == \"block\") {\r\n\t\t\t\tx.style.display = \"none\";\r\n\t\t\t} else {\r\n\t\t\t\tx.style.display = \"block\";\r\n\t\t\t}\r\n\t\t}\r\n\t</script>\r\n</body>\r\n</html>\r\n\r\n\r\n\r\n哈哈  代码中还有挺多测试用的方法 将就看吧~~~\r\n\r\n本人已经编译运行过 分页分的嗷嗷好使~\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}