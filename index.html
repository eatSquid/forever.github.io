<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on https://github.com/jonrohan -->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" href="stylesheets/github-dark.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/script.js"></script>

  <title>Spring+Mybatis实现分页   附代码</title>
  <meta name="description" content="博客">

  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">Spring+Mybatis实现分页   附代码</h1>
    </header>
    <div id="container">
      <p class="tagline">博客</p>
      <div id="main" role="main">
        <div class="download-bar">
        <div class="inner">
          <a href="https://github.com/eatSquid/forever.github.io/tarball/master" class="download-button tar"><span>Download</span></a>
          <a href="https://github.com/eatSquid/forever.github.io/zipball/master" class="download-button zip"><span>Download</span></a>
          <a href="https://github.com/eatSquid/forever.github.io" class="code">View Spring+Mybatis实现分页   附代码 on GitHub</a>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">
          <h1>
<a id="直接mapper文件键入sql分页语句" class="anchor" href="#%E7%9B%B4%E6%8E%A5mapper%E6%96%87%E4%BB%B6%E9%94%AE%E5%85%A5sql%E5%88%86%E9%A1%B5%E8%AF%AD%E5%8F%A5" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>直接mapper文件键入sql分页语句</h1>

<p>使用mysql中limit语句
dao层代码：
package com.cubefs.em.business.dao.base;
import java.util.List;</p>

<p>import com.cubefs.em.business.entity.emsloanqry.Emsloan;
import com.cubefs.em.business.entity.emsloanqry.PageBean;</p>

<p>public interface EmsloanQryDao {</p>

<pre><code>Emsloan selectByPrimaryKey(String FORMNO);
List&lt;Emsloan&gt; selectAll();
List&lt;Emsloan&gt; paging(PageBean page);
</code></pre>

<p>}</p>

<p>package com.cubefs.em.business.dao;
import java.util.List;</p>

<p>import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;</p>

<p>import com.cubefs.em.business.dao.base.EmsloanQryDao;
import com.cubefs.em.business.entity.emsloanqry.Emsloan;
import com.cubefs.em.business.entity.emsloanqry.PageBean;
import com.cubefs.em.business.service.impl.EmsloanQryServiceImpl;</p>

<p><a href="https://github.com/Repository" class="user-mention">@Repository</a>
public class EmsloanDao{</p>

<pre><code>@Autowired
private EmsloanQryDao dao;

public Emsloan em_sloanqry(String FORMNO){ 
    /*Emsloan output = new Emsloan();//这是什么方法？？？？？、
    output = dao.emsloanqry(FORMNO);*/
    return dao.selectByPrimaryKey(FORMNO);
}

public List&lt;Emsloan&gt; selectAll(){
    return dao.selectAll();
}

public List&lt;Emsloan&gt; paging(PageBean page){
    return dao.paging(page);
}
</code></pre>

<p>}</p>

<p>mapper xml映射文件 键入sql语句
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "<a href="http://mybatis.org/dtd/mybatis-3-mapper.dtd">http://mybatis.org/dtd/mybatis-3-mapper.dtd</a>" &gt;

    
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    
    
        formno,fillingdate,requsrno,requsrnm,applyusrno,applyusrnm,applykostlno,applykostlnm,applydeptno,applydeptnm,summary,comments,purpose,agrrepydate
    
    
        select
        
        from cbt_em_resquestloan
        where formno = #{FORMNO,jdbcType=VARCHAR}
    
    
        select
        
        from cbt_em_resquestloan
    </p>

<pre><code>&lt;!-- 分页 --&gt;
&lt;select id="paging" resultMap="BaseResultMap"
    parameterType="com.cubefs.em.business.entity.emsloanqry.PageBean"&gt;
    select * from cbt_em_resquestloan
    where 1=1
    limit ${curCount},${rowsPerPage}
&lt;/select&gt;
</code></pre>

<p></p>

<p>对象封装类：
package com.cubefs.em.business.entity.emsloanqry;</p>

<p>import java.io.Serializable;</p>

<p>public class Emsloan implements Serializable{</p>

<pre><code>/**
 * 
 */
private static final long serialVersionUID = 1L;
private String formno;
private String fillingdate;
private String requsrno;
private String requsrnm;
private String applyusrno;
private String applyusrnm;
private String applykostlno;
private String applykostlnm;
private String applydeptno;
private String applydeptnm;
private String summary;
private String comments;
private String purpose;
private String agrrepydate;
private PageBean page;


public PageBean getPage() {
    return page;
}
public void setPage(PageBean page) {
    this.page = page;
}
public String getFormno() {
    return formno;
}
public void setFormno(String formno) {
    this.formno = formno;
}
public String getFillingdate() {
    return fillingdate;
}
public void setFillingdate(String fillingdate) {
    this.fillingdate = fillingdate;
}
public String getRequsrno() {
    return requsrno;
}
public void setRequsrno(String requsrno) {
    this.requsrno = requsrno;
}
public String getRequsrnm() {
    return requsrnm;
}
public void setRequsrnm(String requsrnm) {
    this.requsrnm = requsrnm;
}
public String getApplyusrno() {
    return applyusrno;
}
public void setApplyusrno(String applyusrno) {
    this.applyusrno = applyusrno;
}
public String getApplyusrnm() {
    return applyusrnm;
}
public void setApplyusrnm(String applyusrnm) {
    this.applyusrnm = applyusrnm;
}
public String getApplykostlno() {
    return applykostlno;
}
public void setApplykostlno(String applykostlno) {
    this.applykostlno = applykostlno;
}
public String getApplykostlnm() {
    return applykostlnm;
}
public void setApplykostlnm(String applykostlnm) {
    this.applykostlnm = applykostlnm;
}
public String getApplydeptno() {
    return applydeptno;
}
public void setApplydeptno(String applydeptno) {
    this.applydeptno = applydeptno;
}
public String getApplydeptnm() {
    return applydeptnm;
}
public void setApplydeptnm(String applydeptnm) {
    this.applydeptnm = applydeptnm;
}
public String getSummary() {
    return summary;
}
public void setSummary(String summary) {
    this.summary = summary;
}
public String getComments() {
    return comments;
}
public void setComments(String comments) {
    this.comments = comments;
}
public String getPurpose() {
    return purpose;
}
public void setPurpose(String purpose) {
    this.purpose = purpose;
}
public String getAgrrepydate() {
    return agrrepydate;
}
public void setAgrrepydate(String agrrepydate) {
    this.agrrepydate = agrrepydate;
}
</code></pre>

<p>}</p>

<p>package com.cubefs.em.business.entity.emsloanqry;</p>

<p>import java.io.Serializable;
import java.util.List;</p>

<p>public class PageBean implements Serializable {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private int curPage;
    private int rowsPerPage;
    private int curCount;
    private int pagenow;</p>

<pre><code>public int getPagenow() {
    return pagenow;
}
public void setPagenow(int pagenow) {
    this.pagenow = pagenow;
}
public int getCurCount() {
    return curCount;
}
public void setCurCount(int curCount) {
    this.curCount = curCount;
}
public int getCurPage() {
    return curPage;
}
public void setCurPage(int curPage) {
    this.curPage = curPage;
}
public int getRowsPerPage() {
    return rowsPerPage;
}
public void setRowsPerPage(int rowsPerPage) {
    this.rowsPerPage = rowsPerPage;
}
</code></pre>

<p>}</p>

<p>控制层代码：
package com.cubefs.em.web.controller;</p>

<p>import java.util.List;</p>

<p>import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;</p>

<p>import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;</p>

<p>import com.cubefs.em.business.entity.emsloanqry.Emsloan;
import com.cubefs.em.business.entity.emsloanqry.PageBean;
import com.cubefs.em.business.service.impl.EmsloanQryServiceImpl;</p>

<p><a href="https://github.com/Controller" class="user-mention">@Controller</a>
public class EmsloanQryController {
    /**
     * 借款信息查询
     * <a href="https://github.com/param" class="user-mention">@param</a> model
     * <a href="https://github.com/return" class="user-mention">@return</a>
     */
    //借款查询jsp入口转向
    <a href="https://github.com/Autowired" class="user-mention">@Autowired</a>
    HttpServletRequest request ;</p>

<pre><code>@Autowired
private EmsloanQryServiceImpl service;

@Autowired
HttpSession session;

@RequestMapping("/emsloanqry")
public String emsloanqry(){
    Emsloan em = service.em_sloanqry("1");
    System.out.println(em.getFillingdate());
    return "/emsloanqry/emsloan";
}

@RequestMapping("/selectAll")
public String selectAll(){
    List&lt;Emsloan&gt; list = service.selectAll();
    request.setAttribute("list", list);

    return "/emsloanqry/emsloan";
}

@RequestMapping("/emsloandetail")
public String emsloandetail(){

    return "/emsloanqry/emsloandetail";
}

@RequestMapping("/showEmsloan")
public String showEmsloan(PageBean page){
    int pagen;
    if(request.getParameter("pagenow")==null){
        pagen = 0;
    }else if(Integer.parseInt(request.getParameter("pagenow"))&lt;0){
        pagen = 0;
    }else{
        pagen = Integer.parseInt(request.getParameter("pagenow"));
    }
    if(pagen==0){
        page.setCurPage(0);
    }else if(pagen&lt;0){
        page.setCurPage(0);
    }else{
        page.setCurPage(pagen);
    }
    page.setRowsPerPage(3);
    List&lt;Emsloan&gt; list = service.paging(page);
    if(list.size()&lt;3&amp;&amp;list.size()&gt;0){
        session.removeAttribute("page_session");
        session.setAttribute("page_session", list);
        request.setAttribute("pagenow", pagen);
        request.setAttribute("page", list);
    }else if(list.size()==0){
        request.setAttribute("pagenow", 2);
        request.setAttribute("page", session.getAttribute("page_session"));
    }else{
        request.setAttribute("page", list);
        request.setAttribute("pagenow", pagen);
    }
    return "/emsloanqry/emsloan";
}
</code></pre>

<p>}</p>

<p>前台jsp页面：
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"
    import="com.cubefs.em.business.entity.emsloanqry.<em>,java.util.</em>"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "<a href="http://www.w3.org/TR/html4/loose.dtd%22%3E">http://www.w3.org/TR/html4/loose.dtd"&gt;</a>

</p>

借款查询

<p>
</p>
    <br>
    <br>
    <br>
    &lt;%
        List list = (List) request.getAttribute("page");
        int pagenow;
        if(request.getAttribute("pagenow")==null){
            pagenow = 0;
        }else{
            pagenow = Integer.parseInt((String)(request.getAttribute("pagenow")).toString());
        }
    %&gt;
    <table align="center" border="0" cellpadding="3" cellspacing="1" width="100%">
        <th>申请部门</th>
        <th>借款人</th>
        <th>申请起始日期</th>
        <th>申请截止日期</th>
        <th>约定还款起始日</th>
        <th>约定还款截至日</th>
        <th></th>
        <th></th>
        &lt;%
            for (int i = 0; i &lt; list.size(); i++) {
        %&gt;
        <tr>
            <td align="center">&lt;%=list.get(i).getApplydeptnm()%&gt;</td>
            <td align="center">&lt;%=list.get(i).getApplyusrnm()%&gt;</td>
            <td align="center">&lt;%=list.get(i).getFillingdate()%&gt;</td>
            <td align="center"></td>
            <td align="center"></td> 
            <td align="center">&lt;%=list.get(i).getAgrrepydate()%&gt;</td>
            <td align="center"><a href="">查询</a></td>
            <td align="center"><a href="">导出</a></td>
        </tr>
        &lt;%
            }
        %&gt;
    </table>
    <h3 align="center">
<a id="--------showemsloanjhtmlpagenow-pagenow-1-上一页--------showemsloanjhtmlpagenow100-尾页----" class="anchor" href="#--------showemsloanjhtmlpagenow-pagenow-1-%E4%B8%8A%E4%B8%80%E9%A1%B5--------showemsloanjhtmlpagenow100-%E5%B0%BE%E9%A1%B5----" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>
        <a href="&lt;%=request.getContextPath()%&gt;/showEmsloan.jhtml?pagenow=0%22%20&gt;%E9%A6%96%E9%A1%B5&lt;/a&gt;%0A%20%20%20%20%20%20%20%20&lt;a%20href=">/showEmsloan.jhtml?pagenow=&lt;%= pagenow-1%&gt;" &gt;←上一页</a>
        <a href="&lt;%=request.getContextPath()%&gt;/showEmsloan.jhtml?pagenow=&lt;%=%20pagenow+1%&gt;%22%20&gt;%E4%B8%8B%E4%B8%80%E9%A1%B5%E2%86%92&lt;/a&gt;%0A%20%20%20%20%20%20%20%20&lt;a%20href=">/showEmsloan.jhtml?pagenow=100" &gt;尾页</a>
    </h3>
    <br>
    <div align="center">
        
    </div><br>

<pre><code>&lt;div id="demo"&gt;
    &lt;table border="0" cellpadding="3" cellspacing="1" width="100%" align="center" style="background-color: #b9d8f3;"&gt;
        &lt;th&gt;&lt;a href="" style="color:red;text-decoration:none;" &gt;一键催单&lt;/a&gt;&lt;/th&gt;
        &lt;th&gt;借款人&lt;/th&gt;
        &lt;th&gt;借款凭证号&lt;/th&gt;
        &lt;th&gt;借款单据号&lt;/th&gt;
        &lt;th&gt;借款时间&lt;/th&gt;
        &lt;th&gt;约定还款时间&lt;/th&gt;
        &lt;th&gt;借款用途&lt;/th&gt;
        &lt;th&gt;还款金额（元）&lt;/th&gt;
        &lt;th&gt;欠款金额（元）&lt;/th&gt;
        &lt;th&gt;&lt;/th&gt;
        &lt;%
            for(int i = 0; i &lt; list.size(); i++){
        %&gt;
        &lt;tr&gt;
            &lt;td align="center"&gt;
                &lt;input type="checkbox" name="&lt;%=list.get(i).getFormno()%&gt;"&gt;
            &lt;/td&gt;
            &lt;td align="center"&gt;&lt;%=list.get(i).getApplyusrnm()%&gt;&lt;/td&gt;
            &lt;td align="center"&gt;&lt;%=list.get(i).getApplyusrno()%&gt;&lt;/td&gt;
            &lt;td align="center"&gt;&lt;%=list.get(i).getApplykostlno()%&gt;&lt;/td&gt;
            &lt;td align="center"&gt;&lt;%=list.get(i).getFillingdate()%&gt;&lt;/td&gt;
            &lt;td align="center"&gt;&lt;%=list.get(i).getAgrrepydate()%&gt;&lt;/td&gt;
            &lt;td align="center"&gt;&lt;%=list.get(i).getPurpose()%&gt;&lt;/td&gt;
            &lt;td align="center"&gt;&lt;/td&gt;
            &lt;td align="center"&gt;&lt;/td&gt;
            &lt;td&gt;&lt;a href=""&gt;催款&lt;/a&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;%
            }
        %&gt;
    &lt;/table&gt;
&lt;/div&gt;


&lt;script language="text/javascript" type="text/javascript"&gt;
    document.getElementById('demo').style.display = "none";

    function mydiv(id) {
        var x = document.getElementById(id);
        if (x.style.display == "block") {
            x.style.display = "none";
        } else {
            x.style.display = "block";
        }
    }
&lt;/script&gt;
</code></pre>

<p>
</p>

<p>哈哈  代码中还有挺多测试用的方法 将就看吧~~~</p>

<p>本人已经编译运行过 分页分的嗷嗷好使~</p>
        </article>
      </div>
    </div>
    <footer>
      <div class="owner">
      <p><a href="https://github.com/eatSquid" class="avatar"><img src="https://avatars3.githubusercontent.com/u/24289076?v=3&amp;s=60" width="48" height="48"></a> <a href="https://github.com/eatSquid">eatSquid</a> maintains <a href="https://github.com/eatSquid/forever.github.io">Spring+Mybatis实现分页   附代码</a></p>


      </div>
      <div class="creds">
        <small>This page generated using <a href="https://pages.github.com/">GitHub Pages</a><br>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/eatSquid/forever.github.io/tarball/master" class="tar">tar</a><a href="https://github.com/eatSquid/forever.github.io/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>

  
</body>
</html>
